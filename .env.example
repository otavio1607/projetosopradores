# Variáveis de Ambiente Necessárias

## Supabase
```env
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=seu-chave-anonima
```

## Email Alerts (Opcional)
```env
VITE_EMAIL_SERVICE=sendgrid  # ou: resend, mailgun
VITE_SENDGRID_API_KEY=SG.xxxxx
VITE_RESEND_API_KEY=re_xxxxx
```

## Feature Flags
```env
VITE_ENABLE_ALERTS=true
VITE_ENABLE_AUDIT_LOGS=true
VITE_ENABLE_RBAC=true
VITE_ALERT_POLL_INTERVAL=30000  # 30 segundos
```

## API
```env
VITE_API_BASE_URL=http://localhost:3000/api
VITE_API_TIMEOUT=30000
```

---

## Como configurar:

### 1. Copie para .env.local
```bash
cp .env.example .env.local
```

### 2. Adicione suas credenciais Supabase
```bash
# Acesse https://app.supabase.com
# Project Settings > API
# Copie as variaáveis
```

### 3. Teste a conexão
```bash
npm run dev
# Verifique se há erros de conexão
```

---

## Variáveis de Desenvolvimento vs Produção

### Development (.env.local)
```env
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=anon-key-aqui
VITE_ENABLE_ALERTS=true
VITE_ALERT_POLL_INTERVAL=30000
```

### Production (.env.production)
```env
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=anon-key-aqui
# Chaves de serviço (não exponha ao cliente)
SUPABASE_SERVICE_ROLE_KEY=service-role-key-aqui
SENDGRID_API_KEY=SG.xxxxx
VITE_ALERT_POLL_INTERVAL=60000  # Menos freq uente em prod
```

---

## Para Backend (Node.js/Express)

Se você implementar um backend para alertas por email:

```env
# .env (Backend)
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_SERVICE_ROLE_KEY=service-role-key-aqui
SENDGRID_API_KEY=SG.xxxxx
RESEND_API_KEY=re_xxxxx
JWT_SECRET=seu-jwt-secret
```

---

## Teste de Conexão

```typescript
// src/integrations/supabase/client.ts

import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

// Teste:
supabase.auth.getSession().then(({ data }) => {
  console.log('✅ Supabase connected:', data.session ? 'Authenticated' : 'Anon')
})
```

---

## Exemplo de .env.example

Crie este arquivo na raiz:

```bash
# Frontend
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=seu-chave-anonima-aqui

# Feature Flags
VITE_ENABLE_ALERTS=true
VITE_ENABLE_AUDIT_LOGS=true
VITE_ENABLE_RBAC=true
VITE_ALERT_POLL_INTERVAL=30000

# API
VITE_API_BASE_URL=http://localhost:3000/api
VITE_API_TIMEOUT=30000

# Email (Optional)
VITE_EMAIL_SERVICE=sendgrid
VITE_SENDGRID_API_KEY=
VITE_RESEND_API_KEY=
```

Depois execute:
```bash
cp .env.example .env.local
# Edite .env.local com suas credenciais
```

---

## ⚠️ Segurança

**NUNCA commit chaves secretas ao git!**

```bash
# Adicione ao .gitignore
.env.local
.env.*.local
.env.production.local
*.key
*.pem
```

Já está no .gitignore? Verifique:
```bash
cat .gitignore | grep "env"
```

---

## Para CI/CD (GitHub Actions, etc)

Use Secrets do repositório:

```yaml
# .github/workflows/deploy.yml
name: Deploy
on: [push]

jobs:
  deploy:
    runs-on: ubuntu-latest
    env:
      VITE_SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
      VITE_SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_KEY }}
      SENDGRID_API_KEY: ${{ secrets.SENDGRID_API_KEY }}
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install && npm run build
```

Configure os secrets em:
- GitHub: Settings > Secrets and variables > Actions
- Vercel: Settings > Environment Variables
- Netlify: Site settings > Build & deploy > Environment
